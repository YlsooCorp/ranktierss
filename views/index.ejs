<!DOCTYPE html>
<html lang="en">
  <%- include('partials/head', { pageTitle }) %>
  <body class="mc-body">
    <div class="mc-background"></div>
    <%- include('partials/navbar', { navActive: typeof navActive !== 'undefined' ? navActive : null }) %>

    <main class="mc-main" id="main-content">
      <section class="mc-hero">
        <div class="mc-container mc-hero__grid">
          <div class="mc-hero__content">
            <% const totalGames = Array.isArray(games) ? games.length : 0; %>
            <% const spotlightCount = Array.isArray(spotlightPlayers) ? spotlightPlayers.length : 0; %>
            <p class="mc-tag">Minecraft Competitive Ladder</p>
            <h1 class="mc-hero__title">Climb the Emerald Ranks</h1>
            <p class="mc-hero__subtitle">
              RankTiers focuses entirely on Minecraft PvP. Track placements for every kit, follow official
events, and prove your skill with verified evidence.
            </p>
            <div class="mc-hero__actions">
              <a class="mc-button mc-button--accent" href="/game/Minecraft">View Leaderboard</a>
              <a class="mc-button mc-button--ghost" href="/events">Browse Events</a>
              <button
                class="mc-button mc-button--outline"
                type="button"
                data-copy-text="<%= minecraftServerIp %>"
                data-toast="Server IP copied!"
              >
                Copy Server IP
              </button>
            </div>
            <% const minecraftAccount = (linkedAccounts || []).find(acc => acc.game?.toLowerCase() === 'minecraft'); %>
            <div class="mc-hero__status mc-card">
              <% if (currentUser && minecraftAccount) { %>
                <h3>Linked as <span><%= minecraftAccount.game_username %></span></h3>
                <p>Your profile is ready for tournament placements and tier submissions.</p>
              <% } else if (currentUser) { %>
                <h3>Link your Minecraft IGN</h3>
                <p>Connect your account to appear on the leaderboard and qualify for events.</p>
                <a class="mc-pill" href="/account">Link Account</a>
              <% } else { %>
                <h3>Join the Ladder</h3>
                <p>Create an account to start climbing competitive Minecraft tiers.</p>
                <a class="mc-pill" href="/register">Create Account</a>
              <% } %>
            </div>
            <div class="mc-hero__ip mc-card">
              <div class="mc-hero__ip-header">
                <h3>Server IP</h3>
                <span class="mc-tag mc-tag--subtle">Always online</span>
              </div>
              <div class="mc-hero__ip-body">
                <code><%= minecraftServerIp %></code>
                <button
                  type="button"
                  class="mc-pill mc-pill--accent"
                  data-copy-text="<%= minecraftServerIp %>"
                  data-toast="Server IP copied!"
                >
                  Copy
                </button>
              </div>
              <p class="mc-text-muted">Hop on to scrim, practise kits, and secure stat-tracked wins.</p>
            </div>
            <div class="mc-hero__quickstart mc-card">
              <h3>Need a head start?</h3>
              <ul class="mc-quick-list">
                <li>
                  <span class="mc-key-hint" aria-hidden="true">/</span>
                  <span>Press <strong>/</strong> anywhere to open global search.</span>
                </li>
                <li>
                  <span class="mc-key-hint" aria-hidden="true">Shift + /</span>
                  <span>Use the quick menu to jump into leaderboards or resources.</span>
                </li>
                <li>
                  <span class="mc-key-hint" aria-hidden="true">B</span>
                  <span>Tap the back-to-top control after scrolling deep into stats.</span>
                </li>
              </ul>
              <ul class="mc-quick-stats">
                <li>
                  <strong><%= totalGames %></strong>
                  <span>Kits actively tracked</span>
                </li>
                <li>
                  <strong><%= spotlightCount %></strong>
                  <span>Spotlight players this week</span>
                </li>
                <li>
                  <strong><%= upcomingEvent ? 'Live' : '24' %></strong>
                  <span><%= upcomingEvent ? 'Event running now' : 'Matches logged nightly' %></span>
                </li>
              </ul>
            </div>
          </div>

          <aside class="mc-hero__preview mc-card">
            <div class="mc-hero__badge">Featured Ladder</div>
            <h3>Minecraft Kits</h3>
            <p>Balanced competitive ladders tuned for duels, sky battles, and custom kit metas.</p>
            <ul class="mc-list">
              <li>Real-time points and tier updates</li>
              <li>Event performance tracked automatically</li>
              <li>Discord notifications for promotions</li>
            </ul>
            <a class="mc-pill mc-pill--accent" href="/submit">Submit Proof</a>
            <% if (upcomingEvent) { const heroEventIcon = upcomingEventTextures && upcomingEventTextures[upcomingEvent.kit]; %>
              <div class="mc-hero__event">
                <div class="mc-hero__event-heading">
                  <h4>Next Event</h4>
                  <% if (heroEventIcon) { %>
                    <img src="<%= heroEventIcon %>" alt="<%= upcomingEvent.kit %> kit" loading="lazy" />
                  <% } %>
                </div>
                <p class="mc-hero__event-name"><%= upcomingEvent.name %></p>
                <p class="mc-text-muted">Kit: <%= upcomingEvent.kit %></p>
                <a class="mc-button mc-button--ghost" href="/events/<%= upcomingEvent.id %>">View bracket</a>
              </div>
            <% } %>
          </aside>
        </div>
      </section>

      <% if (spotlightPlayers && spotlightPlayers.length > 0) { %>
        <section class="mc-section mc-section--spotlight">
          <div class="mc-container">
            <header class="mc-section__header">
              <h2 class="mc-heading">Ladder Spotlights</h2>
              <p class="mc-text-muted">Meet the current points leaders across Minecraft kits and events.</p>
            </header>
            <div class="mc-spotlight">
              <% spotlightPlayers.forEach(player => { %>
                <article class="mc-card mc-spotlight__card">
                  <div class="mc-spotlight__skin">
                    <% if (player.renderUrl) { %>
                      <img src="<%= player.renderUrl %>" alt="<%= player.username %> skin" loading="lazy" />
                    <% } %>
                  </div>
                  <div class="mc-spotlight__body">
                    <h3><a href="<%= player.profileUrl %>"><%= player.username %></a></h3>
                    <p class="mc-text-muted">Total points: <strong><%= player.totalPoints %></strong></p>
                    <% if (player.kits && player.kits.length > 0) { %>
                      <div class="mc-spotlight__kits">
                        <% player.kits.slice(0, 3).forEach(kitName => { const icon = spotlightKitTextures && spotlightKitTextures[kitName]; %>
                          <span class="mc-spotlight__kit">
                            <% if (icon) { %>
                              <img src="<%= icon %>" alt="<%= kitName %> kit" loading="lazy" />
                            <% } %>
                            <span><%= kitName %></span>
                          </span>
                        <% }) %>
                        <% if (player.kits.length > 3) { %>
                          <span class="mc-text-muted">+<%= player.kits.length - 3 %> more</span>
                        <% } %>
                      </div>
                    <% } %>
                    <a class="mc-pill mc-pill--ghost" href="<%= player.profileUrl %>">View profile</a>
                  </div>
                </article>
              <% }) %>
            </div>
          </div>
        </section>
      <% } %>

      <section class="mc-section">
        <div class="mc-container">
          <header class="mc-section__header">
            <h2 class="mc-heading">Minecraft Ladder Overview</h2>
            <p class="mc-text-muted">Every placement you see below comes from verified Minecraft PvP gameplay.</p>
          </header>
          <div class="mc-grid mc-grid--games">
            <% games.forEach(game => { %>
              <article class="mc-card mc-game-card">
                <div class="mc-game-card__banner">Minecraft</div>
                <div class="mc-game-card__body">
                  <h3><%= game.name %></h3>
                  <p>Browse tier placements across duel kits, bridge matchups, and event lineups.</p>
                  <a class="mc-button mc-button--accent" href="/game/<%= encodeURIComponent(game.name) %>">Open Leaderboard</a>
                </div>
              </article>
            <% }) %>
          </div>
        </div>
      </section>

      <section class="mc-section mc-section--alt">
        <div class="mc-container mc-feature-grid">
          <article class="mc-card mc-feature">
            <h3>Seasonal Events</h3>
            <p>Emerald Cup tournaments automatically generate balanced brackets for every tier.</p>
          </article>
          <article class="mc-card mc-feature">
            <h3>Evidence-Driven</h3>
            <p>Upload match recordings or screenshots and let admins verify your promotion instantly.</p>
          </article>
          <article class="mc-card mc-feature">
            <h3>Profile Insights</h3>
            <p>Track wins, losses, and tier history on a personalized Minecraft player profile.</p>
          </article>
        </div>
      </section>

      <section class="mc-section mc-section--comfort">
        <div class="mc-container">
          <header class="mc-section__header">
            <h2 class="mc-heading">Thoughtful Quality-of-Life touches</h2>
            <p class="mc-text-muted">Smooth navigation, subtle guidance, and always-on context make browsing the ladder effortless.</p>
          </header>
          <div class="mc-comfort-grid">
            <article class="mc-comfort-card">
              <h3>Scroll awareness</h3>
              <p>A slim progress indicator and floating control let you zip back to the hero section without losing your place.</p>
            </article>
            <article class="mc-comfort-card">
              <h3>Accessible journeys</h3>
              <p>Improved skip links, keyboard hints, and shortcut toasts make RankTiers easier to navigate with a keyboard alone.</p>
            </article>
            <article class="mc-comfort-card">
              <h3>Curated quick menu</h3>
              <p>Summon the Shift + / menu to access the hottest ladders, submission forms, or policy docs in a single keystroke.</p>
            </article>
          </div>
        </div>
      </section>
    </main>

    <%- include('partials/footer') %>
  </body>
</html>
