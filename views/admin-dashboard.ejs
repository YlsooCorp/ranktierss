                                                <!DOCTYPE html>
                                                <html lang="en">
                                                <head>
                                                  <meta charset="UTF-8">
                                                  <title>Admin Dashboard - RankTiers</title>
                                                  <link rel="stylesheet" href="/styles.css">
                                                  <style>
                                                    body { background: #0f172a; color: #fff; font-family: Poppins, sans-serif; }
                                                    header { display: flex; justify-content: space-between; align-items: center; padding: 1rem 2rem; background: #1e293b; }
                                                    h1 { font-size: 1.6rem; color: #00f2fe; }
                                                    a.logout { color: #f87171; text-decoration: none; }
                                                    main { padding: 2rem; }
                                                    table { width: 100%; border-collapse: collapse; margin-top: 1rem; background: #1e293b; border-radius: 8px; overflow: hidden; }
                                                    th, td { padding: 0.8rem; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1); }
                                                    th { background: #334155; }
                                                    tr:hover { background: rgba(255,255,255,0.05); }
                                                    form.inline { display: inline-block; margin: 0; }
                                                    input, select, button { background: #334155; border: none; color: white; padding: 0.4rem 0.6rem; border-radius: 6px; }
                                                    button { cursor: pointer; background: linear-gradient(135deg, #4facfe, #00f2fe); }
                                                    .section { margin-bottom: 3rem; }
                                                    h2 { color: #38bdf8; }
                                                  </style>
                                                </head>
                                                <body>
                                                <header>
                                                  <h1>‚öôÔ∏è RankTiers Admin</h1>
                                                  <a href="/admin/logout" class="logout">Logout</a>
                                                </header>

<main>
  <% if (adminMessage) { %>
    <div class="notice success"><%= adminMessage %></div>
  <% } %>
  <% if (adminError) { %>
    <div class="notice error"><%= adminError %></div>
  <% } %>

  <section class="section">
    <h2>üèÜ Create Event</h2>
    <form class="event-builder" method="POST" action="/admin/events/create">
      <div class="form-row">
        <input type="text" name="name" placeholder="Event name" required>
        <select name="game" required>
          <option value="">Select game</option>
          <% games.forEach(g => { %>
            <option value="<%= g.name %>"><%= g.name %></option>
          <% }) %>
        </select>
        <input type="text" name="kit" placeholder="Kit" required>
      </div>
      <div class="tier-picker">
        <label class="include-all">
          <input type="checkbox" name="tiers_all" value="on" checked>
          Include every tier
        </label>
        <div class="tier-grid">
          <% TIERS.forEach(tier => { %>
            <label>
              <input type="checkbox" name="tiers" value="<%= tier %>">
              <span><%= tier %></span>
            </label>
          <% }) %>
        </div>
      </div>
      <p class="helper-text">Uncheck "Include every tier" to target specific tiers.</p>
      <button type="submit">Create Event</button>
    </form>

    <div class="events-summary">
      <h3>Active &amp; Recent Events</h3>
      <% if (events.length > 0) { %>
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Game</th>
              <th>Kit</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <% events.forEach(event => { %>
              <tr>
                <td><%= event.name %></td>
                <td><%= event.game %></td>
                <td><%= event.kit %></td>
                <td><a class="table-link" href="/admin/events/<%= event.id %>">Manage ‚Üí</a></td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      <% } else { %>
        <p class="empty">No events yet.</p>
      <% } %>
    </div>
  </section>

  <section class="section">
    <h2>üéÆ Games</h2>
                                                    <form method="POST" action="/admin/game/add">
                                                      <input type="text" name="name" placeholder="Add new game" required>
                                                      <button type="submit">Add Game</button>
                                                    </form>
                                                    <table>
                                                      <tr><th>ID</th><th>Name</th><th>Actions</th></tr>
                                                      <% games.forEach(g => { %>
                                                        <tr>
                                                          <td><%= g.id %></td>
                                                          <td><%= g.name %></td>
                                                          <td>
                                                            <form class="inline" action="/admin/delete/games/<%= g.id %>" method="POST">
                                                              <button type="submit">üóë Delete</button>
                                                            </form>
                                                          </td>
                                                        </tr>
                                                      <% }) %>
                                                    </table>
                                                  </section>

                                                  <section class="section">
                                                    <h2>üë§ Players</h2>
                                                    <form method="POST" action="/admin/player/add">
                                                      <input type="text" name="username" placeholder="Add new player" required>
                                                      <button type="submit">Add Player</button>
                                                    </form>
                                                    <table>
                                                      <tr><th>ID</th><th>Username</th><th>Actions</th></tr>
                                                      <% players.forEach(p => { %>
                                                        <tr>
                                                          <td><%= p.id %></td>
                                                          <td><%= p.username %></td>
                                                          <td>
                                                            <form class="inline" action="/admin/delete/players/<%= p.id %>" method="POST">
                                                              <button type="submit">üóë Delete</button>
                                                            </form>
                                                          </td>
                                                        </tr>
                                                      <% }) %>
                                                    </table>
                                                  </section>

                                                  <section class="section">
                                                    <h2>üèÖ Player Stats</h2>
                                                    <table>
                                                      <tr><th>Player</th><th>Game</th><th>Kit</th><th>Tier</th><th>Points</th><th>Actions</th></tr>
                                                      <% stats.forEach(s => { %>
                                                        <tr>
                                                          <td><%= s.players.username %></td>
                                                          <td><%= s.game %></td>
                                                          <td><%= s.kit %></td>
                                                          <td>
                                                            <form class="inline" method="POST" action="/admin/stat/update/<%= s.id %>">
                                                              <select name="tier">
                                                                <% TIERS.forEach(t => { %>
                                                                  <option value="<%= t %>" <%= t === s.tier ? "selected" : "" %>><%= t %></option>
                                                                <% }) %>
                                                              </select>
                                                          </td>
                                                          <td><input type="number" name="points" value="<%= s.points %>" style="width:70px"></td>
                                                          <td>
                                                              <button type="submit">üíæ Save</button>
                                                              </form>
                                                              <form class="inline" action="/admin/delete/player_stats/<%= s.id %>" method="POST">
                                                                <button type="submit">üóë Delete</button>
                                                              </form>
                                                          </td>
                                                        </tr>
                                                      <% }) %>
                                                    </table>
                                                  </section>
                                                </main>
                                                </body>
                                                </html>
